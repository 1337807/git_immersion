<!doctype html>
<html>
  <head>
    <link href="labs.css" media="screen,print" rel="stylesheet" type="text/css" />
  </head>
  <body>
    <header>
      <a href="http://edgecase.com">
        <img id="logo" src="edgecase.gif"\ >
      </a>
      <div class="title">Git Immersion Labs</div>
      <nav>
  <ul>
    <li>
              <a href="lab_21.html">&laquo; Previous Lab</a>
          </li>
    <li>
      <a href="index.html">Index</a>
    </li>
    <li>
              <a href="lab_23.html">Next Lab &raquo;</a>
          </li>
  </ul>
</nav>

    </header>
    <section id="main">
      <article>
        <h1>Lab 22:  Git Internals: The .git directory</h1>
<h2>Goals</h2>
<ul>
	<li>Learn about the structure of the <code>.git</code> directory</li>
</ul>
<h3>The <code>.git</code> Directory</h3>
<p>Time to do some exploring.  First, from the root of your project directory&#8230;</p>
<p class="command">Execute:</p>
<pre class="instructions">ls -C .git</pre>
<p class="command">Output:</p>
<pre class="sample">$ ls -C .git
COMMIT_EDITMSG	ORIG_HEAD	description	info		refs
HEAD		branches	hooks		logs		rr-cache
MERGE_RR	config		index		objects
</pre>
<p>This is the magic directory where all the git &#8220;stuff&#8221; is stored. Let&#8217;s peek in the objects directory.</p>
<h3>The Object Store</h3>
<p class="command">Execute:</p>
<pre class="instructions">ls -C .git/objects</pre>
<p class="command">Output:</p>
<pre class="sample">$ ls -C .git/objects
01	11	28	59	6c	86	9f	c4	e6	info
09	24	2d	69	78	97	af	d4	e7	pack
0a	27	43	6b	7c	9c	b5	e4	f5
</pre>
<p>You should see a bunch of directories with 2 letter names.  The directory names are the first two letters of the sha1 hash of the object stored in git.</p>
<h3>Deeper into the Object Store</h3>
<p class="command">Execute:</p>
<pre class="instructions">ls -C .git/objects/&lt;dir&gt;</pre>
<p class="command">Output:</p>
<pre class="sample">$ ls -C .git/objects/01
79abfa425af7ba26f14f614c0209c7fba03490
</pre>
<p>Look in one of the two-letter directories.  You should see some files with 38 character names.  These are the files that contain the objects stored in git.  These files are compressed and encoded, so looking at their contents directly won&#8217;t be very helpful, but we will take a closer look in a bit.</p>
<h3>Config File</h3>
<p class="command">Execute:</p>
<pre class="instructions">cat .git/config</pre>
<p class="command">Output:</p>
<pre class="sample">$ cat .git/config
[core]
	repositoryformatversion = 0
	filemode = true
	bare = false
	logallrefupdates = true
	ignorecase = true
</pre>
<p>This is project specific configuration file.  Config entries in here will override the config entries in the <code>.gitconfig</code> file in your home directory, at least for this project.</p>
<h3>Branches and Tags</h3>
<p class="command">Execute:</p>
<pre class="instructions">ls .git/refs
ls .git/refs/heads
ls .git/refs/tags
cat .git/refs/tags/v1</pre>
<p class="command">Output:</p>
<pre class="sample">$ ls .git/refs
heads
tags
$ ls .git/refs/heads
master
$ ls .git/refs/tags
v1
v1-beta
$ cat .git/refs/tags/v1
2d930c3b0f521fadf731d966fce2936941600e78
</pre>
<p>You should recogize the files in the tags subdirectory.  Each file corresponds to a tag you created with the <code>git tag</code> command earlier. It&#8217;s content is just the hash of the commit tied to the tag.</p>
<p>The heads directory is similar, but is used for branches rather than tags.  We only have one branch at the moment, so all you will see is master in this directory.</p>
<h3>The <span class="caps">HEAD</span> File</h3>
<p class="command">Execute:</p>
<pre class="instructions">cat .git/HEAD</pre>
<p class="command">Output:</p>
<pre class="sample">$ cat .git/HEAD
ref: refs/heads/master
</pre>
<p>The <span class="caps">HEAD</span> file contains a reference to the current branch.  Should be a reference to master at this point.</p>
      </article>
    </section>
    <footer>
      <nav>
  <ul>
    <li>
              <a href="lab_21.html">&laquo; Previous Lab</a>
          </li>
    <li>
      <a href="index.html">Index</a>
    </li>
    <li>
              <a href="lab_23.html">Next Lab &raquo;</a>
          </li>
  </ul>
</nav>

   </footer>
  </body>
</html>
